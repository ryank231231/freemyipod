# nothing         center          right           center+right    left            center+left     left+right     center+left+right
.word(rockbox)  .word(entry)    .word(entry)    .word(console)  .word(entry)    .word(entry)    .word(entry)    .word(entry)   
.word(rockbox)  .word(umsboot)  .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    # +play
.word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    # +menu
.word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    .word(entry)    # +play+menu

# error handler
.word(0xffffffff)

console:
  terminate()

poweroff:
  poweroff()

umsboot:
  readflash(0x08000000, "umsboot ")
  exec(0x08000000)

rockbox:
  error(rockboxuncompressed)
  readfile(0x09000000, "/iloader/rockbox.ucl\0")
  unpackucl(0x09000000, 0x08000000)
  exec(0x08000000)
rockboxuncompressed:
  error(0xffffffff)
  readfile(0x08000000, "/.rockbox/rockbox.ipod\0")
  rbchecksum(0x08000000)
  exec(0x08000000)

update:
  error(updateerror)
  backlight(1, 55, 10)
  readfile(0x08000000, "/iLoader/update.cfg\0")
  script(0x08000000, 0)
updateerror:
  error(0xffffffff)
  fillrect(0, 0, 320, 240, 0xffff)
  text(16, 16, 0x0000, 0xffff, "Please place update.cfg\0")
  text(16, 24, 0x0000, 0xffff, "in the iLoader folder on\0")
  text(16, 32, 0x0000, 0xffff, "your iPod. Press any key\0")
  text(16, 40, 0x0000, 0xffff, "to return to the menu.\0")
  blit()
  button(menu, menu, menu, menu, menu, 0)

entry:
  readfile(0x08000000, "/iLoader/theme.ucl\0")
  unpackucl(0x08000000, 0x09000000)
menu:
  fillrect(0, 0, 320, 240, 0xffff)
  displaybmp(195, 0, 0x09000000)
  displaybmp(0, 0, 0x0900ec88)
  blit()
  menu(mainmenu, 0, 0xffffffff, 0xfffffffe, 0xffffffff, 0xfffffffe, 0)

mainmenu:
  .menuentry(0x0901d0f8, 0, 0, 0, 0, 0, 0, rockbox)
  .menuentry(0x0901f788, 0, 25, 0, 0, 0, 0, console)
  .menuentry(0x09021e18, 0, 50, 0, 0, 0, 0, poweroff)
  .menuentry(0x090244a8, 0, 75, 0, 0, 0, 0, update)
  .menuentry(0x09026b38, 0, 100, 0, 0, 0, 0, umsboot)
  .menuentry(0x090291c8, 0, 125, 0, 0, 0, 0, 0xffffffff)
  .word(0)
